using System;
using ICSharpCode.AvalonEdit.Document;
using ICSharpCode.AvalonEdit.Rendering;

namespace Perth
{
	// Token: 0x02000012 RID: 18
	internal class TruncateLongLines : VisualLineElementGenerator
	{
		// Token: 0x0600006A RID: 106 RVA: 0x00005430 File Offset: 0x00003630
		public override int GetFirstInterestedOffset(int startOffset)
		{
			DocumentLine lastDocumentLine = base.CurrentContext.VisualLine.LastDocumentLine;
			if (lastDocumentLine.Length > 400)
			{
				int num = lastDocumentLine.Offset + 400 - "-- ...".Length;
				if (startOffset <= num)
				{
					return num;
				}
			}
			return -1;
		}

		// Token: 0x0600006B RID: 107 RVA: 0x0000547A File Offset: 0x0000367A
		public override VisualLineElement ConstructElement(int offset)
		{
			return new FormattedTextElement("-- ...", base.CurrentContext.VisualLine.LastDocumentLine.EndOffset - offset);
		}

		// Token: 0x0400007D RID: 125
		private const int maxLength = 400;

		// Token: 0x0400007E RID: 126
		private const string ellipsis = "-- ...";

		// Token: 0x0400007F RID: 127
		private const int charactersAfterEllipsis = 0;
	}
}
